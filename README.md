# 📦 demo-store-order-service
This repository contains the NestJS API for the Demo Store, responsible for handling order processing and related logic. 
It acts as a backend service, potentially interacting with other services or a database.

Url: https://demostoreorders-dannys-bfbreje3cnfgaubf.israelcentral-01.azurewebsites.net/api

# ✨ Features
Order Processing: Handles creation, retrieval, and management of orders.

API Endpoints: Exposes RESTful endpoints for order operations.

Modular Architecture: Built with NestJS for a scalable and maintainable structure.

# 🚀 Getting Started (Local Development)
To get this API running on your local machine, ensure you have the following:

## Prerequisites
Node.js (v22.x or later): Download & Install Node.js

npm (comes with Node.js) or Yarn

Git: Download & Install Git

NestJS CLI:

npm install -g @nestjs/cli

## Installation
Clone the repository:

git clone https://github.com/dannyshr/demo-store-product-service.git

cd demo-store-order-service

Install dependencies:

npm install OR yarn install

Configure Environment Variables for Local Development:
Create a .env file in the root of your project. This file will hold environment variables specific to your local setup.

PORT="3000" Or your desired local port

CORS_ORIGIN="http://localhost:3001"  Or your demo-store-frontend url

ELASTICSEARCH_URL=""

ELASTICSEARCH_API_KEY=""

Note: Ensure your src/main.ts is configured to use process.env.PORT.

## Running Locally
Build the application:

npm run build

This compiles the TypeScript code into JavaScript, outputting to the dist folder.

Start the application:

npm run start:dev OR yarn start:dev

## API Endpoints (Local)
Base URL: http://localhost:3001

Orders: http://localhost:3001/orders

Swagger UI: If configured, typically http://localhost:3001/api or http://localhost:3001/api-docs

# ☁️ Deployment (CI/CD)
This application is deployed to Azure App Service (Web App) for Linux using a GitHub Actions pipeline.

Azure Services Used: 
Azure App Service (Linux) - Hosts the NestJS API.

CI/CD Pipeline Overview: 
The deployment pipeline is defined in .github/workflows/main_demostoreorders-dannys.yml

Trigger: The pipeline automatically triggers on pushes to the main branch.

Build: Node.js dependencies are installed, and the NestJS application is built (npm run build).

Deploy: The azure/webapps-deploy@v2 action installs the compiled dist folder to the Azure App Service.

Startup Command: The Azure App Service is configured with a Startup Command (node dist/main.js) to correctly launch the NestJS application.

Environment Variables in Azure
The following environment variables are configured as Application Settings in your Azure App Service resource in the Azure Portal (under Configuration > Application settings). These are critical for your NestJS app's runtime behavior.

NODE_ENV: production (recommended for production deployments).

PORT: Azure automatically injects the port your app should listen on (typically 8080 for Linux App Services). Ensure your main.ts uses process.env.PORT.

CORS_ORIGINS__0: https://lemon-plant-0e3b51d03.1.azurestaticapps.net/ (Your Azure deployed frontend URL)

ELASTICSEARCH_URL=""
ELASTICSEARCH_API_KEY=""

# 🌐 Deployed API Endpoints
Base URL: https://demostoreorders-dannys-bfbreje3cnfgaubf.israelcentral-01.azurewebsites.net

Orders: https://demostoreorders-dannys-bfbreje3cnfgaubf.israelcentral-01.azurewebsites.net/orders

Swagger UI: If configured, typically https://demostoreorders-dannys-bfbreje3cnfgaubf.israelcentral-01.azurewebsites.net/api

# 📂 Project Structure
.

├── src/                   # Source code

│   ├── main.ts            # Application entry point

│   ├── app.module.ts

│   ├── orders/            # Orders module

│   └── ...

├── dist/                  # Compiled JavaScript output (generated by `npm run build`)

├── node_modules/

├── package.json

├── tsconfig.json

├── .github/

│   └── workflows/         # GitHub Actions workflow file

├── .env                   # Local environment variables (ignored by Git)

└── README.md

# 📄 License
Public